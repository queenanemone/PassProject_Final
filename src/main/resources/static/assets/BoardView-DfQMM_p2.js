import{u as W,r as d,j as X,a as o,e as Y,b as e,h as g,q as v,v as Z,bH as ee,F as u,b6 as p,m as $,t as a,i as k,p as w,k as te,o as l,bE as L,n as B}from"./index-DBgGMAVP.js";import{H as se}from"./Header-gOfElMZz.js";import{b as C}from"./board-BdiKinwz.js";import{r as M}from"./record-BH2DDIe9.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D-v-8tSO.js";const oe={class:"relative flex min-h-screen w-full flex-col"},le={class:"flex-grow"},ae={class:"container mx-auto px-4 py-8 sm:px-6 lg:px-8"},ne={class:"grid grid-cols-1 gap-8 lg:grid-cols-4"},de={class:"lg:col-span-1"},ie={class:"sticky top-24 rounded-xl border border-gray-200/10 dark:border-border-dark bg-background-light dark:bg-card-dark p-4"},ce={class:"flex flex-col gap-6"},ue={class:"flex h-12 w-full flex-col"},pe={class:"flex h-full w-full flex-1 items-stretch rounded-lg"},xe={class:"flex flex-col"},be={class:"flex flex-col border-t border-t-slate-200/10 py-2 group dark:border-t-border-dark",open:""},me={class:"flex flex-col gap-2 pt-2 text-sm text-slate-500 dark:text-slate-400"},fe=["value"],ge={class:"flex flex-col border-t border-t-slate-200/10 py-2 group dark:border-t-border-dark",open:""},ve={class:"flex flex-col gap-2 pt-2 text-sm text-slate-500 dark:text-slate-400"},ke=["value"],ye={class:"flex flex-col border-t border-b border-t-slate-200/10 border-b-slate-200/10 py-2 group dark:border-t-border-dark dark:border-b-border-dark"},he={class:"flex flex-col gap-2 pt-2 text-sm text-slate-500 dark:text-slate-400"},_e=["value"],we={class:"lg:col-span-3"},Ce={class:"mb-8"},Re={class:"flex gap-4 border-b border-gray-200/10 dark:border-border-dark mb-6"},Te={class:"text-4xl font-black tracking-tighter text-slate-900 dark:text-white"},Ae={class:"mt-2 text-base font-normal text-slate-500 dark:text-slate-400"},Ve={key:0,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-3"},Le={key:1,class:"col-span-full group relative flex flex-col items-center justify-center gap-4 overflow-hidden rounded-xl border-2 border-dashed border-slate-200/20 bg-transparent p-8 text-center dark:border-border-dark"},Pe={key:2,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-3"},Ie=["onClick"],Ee={class:"flex flex-1 flex-col p-4"},je={class:"flex items-start justify-between gap-2 mb-2"},Ne=["onClick"],$e=["onClick"],Be={class:"mt-2 flex flex-wrap gap-2"},Me={key:0,class:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary"},Se={key:1,class:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary"},ze={key:2,class:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary"},Ue={class:"mt-auto flex items-center justify-between pt-4"},De={class:"flex items-center gap-2"},Fe={key:1,class:"size-6 rounded-full bg-slate-300 dark:bg-card-dark flex items-center justify-center"},He={class:"text-xs font-medium text-slate-500 dark:text-slate-400"},Oe={class:"flex items-center gap-4 text-slate-500 dark:text-slate-400"},qe=["onClick"],Qe={class:"text-xs"},Ge=["onClick"],Je={class:"text-xs"},Ke={class:"fixed bottom-8 right-8"},We={class:"bg-card-dark rounded-xl border border-border-dark p-6 sm:p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto"},Xe={class:"flex items-center justify-between mb-4"},Ye={class:"space-y-3"},Ze=["onClick"],et={class:"text-white font-semibold mb-2"},tt={class:"text-slate-400 text-sm line-clamp-2"},st={__name:"BoardView",setup(rt){const R=te(),y=W(),i=d("TRAVEL_PLAN"),T=d(!1),h=d([]),P=d(""),x=d(!1),I=d([]),_=d({regionCode:null,tripType:null,season:null,sortBy:"popular"}),b=d([]),m=d([]),f=d([]),S=[{label:"서울/경기",value:"1"},{label:"강원",value:"32"},{label:"충청",value:"33,34"},{label:"전라",value:"37,38"},{label:"경상",value:"35,36"},{label:"제주",value:"39"}],z=["가족여행","커플여행","혼자여행","우정여행","반려동물 동반"],U=["봄","여름","가을","겨울"],c=async()=>{T.value=!0;try{const r={category:i.value,sortBy:_.value.sortBy};b.value.length>0&&(r.regionCode=b.value.join(",")),m.value.length>0&&(r.tripType=m.value.join(",")),f.value.length>0&&(r.season=f.value.join(","));const t=await C.getPosts(r);t.success&&(h.value=t.data||[])}catch(r){console.error("게시글 로드 오류:",r),h.value=[]}finally{T.value=!1}},E=r=>{i.value=r,b.value=[],m.value=[],f.value=[],_.value={regionCode:null,tripType:null,season:null,sortBy:"popular"},c()},A=()=>{c()},D=()=>{c()},V=r=>{R.push(`/post/${r}`)},F=async r=>{if(confirm("정말 이 게시글을 삭제하시겠습니까?"))try{const t=await C.deletePost(r);t.success?(alert("게시글이 삭제되었습니다"),c()):alert(t.message||"게시글 삭제에 실패했습니다")}catch(t){console.error("게시글 삭제 오류:",t),alert("게시글 삭제 중 오류가 발생했습니다")}},H=async r=>{if(!y.isAuthenticated){alert("로그인이 필요합니다");return}try{await C.likePost(r),c()}catch(t){console.error("좋아요 오류:",t)}},O=()=>{i.value==="TRAVEL_PLAN"?R.push("/share-plan"):q()},q=async()=>{if(!y.isAuthenticated){alert("로그인이 필요합니다"),R.push("/login");return}try{const r=await M.getUserRecords();r.success&&(I.value=r.data||[],x.value=!0)}catch(r){console.error("여행 기록 로드 오류:",r)}},Q=async r=>{try{const t=await M.getRecord(r);if(t.success){const s=t.data,n=j(s.content);(await C.createPost({title:s.title,content:s.content,category:"TRAVEL_RECORD",regionCode:s.regionCode,tripType:s.tripType,season:s.season})).success&&(alert("여행 기록이 게시판에 공유되었습니다"),x.value=!1,c())}}catch(t){console.error("여행 기록 공유 오류:",t),alert("여행 기록 공유 중 오류가 발생했습니다")}},j=r=>{if(!r)return"";const t=document.createElement("div");t.innerHTML=r;const s=t.textContent||t.innerText||"";return s.substring(0,200)+(s.length>200?"...":"")},G=r=>y.user&&y.user.userId===r.userId,N=r=>({1:"서울/경기",2:"부산",3:"대구",4:"인천",31:"서울/경기",32:"강원",33:"충청",34:"충청",35:"경상",36:"경상",37:"전라",38:"전라",39:"제주"})[r]||"",J=r=>"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",K=r=>r>=1e3?(r/1e3).toFixed(1)+"천":r.toString();return X(()=>{c()}),(r,t)=>(l(),o("div",oe,[Y(se),e("main",le,[e("div",ae,[e("div",ne,[e("aside",de,[e("div",ie,[e("div",ce,[e("div",null,[e("label",ue,[e("div",pe,[t[9]||(t[9]=e("div",{class:"flex items-center justify-center rounded-l-lg border-r-0 border-slate-200/10 bg-white/5 pl-4 text-slate-400 dark:border-border-dark dark:bg-background-dark"},[e("span",{class:"material-symbols-outlined"},"search")],-1)),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>P.value=s),onInput:D,class:"form-input h-full min-w-0 flex-1 resize-none overflow-hidden rounded-r-lg border-none border-l-0 bg-white/5 px-4 pl-2 text-base font-normal leading-normal text-slate-800 placeholder:text-slate-400 focus:outline-0 focus:ring-0 dark:bg-background-dark dark:text-white",placeholder:"지역, 여행 타입으로 검색..."},null,544),[[Z,P.value]])])])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2",for:"sort-by"},"정렬 기준",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>_.value.sortBy=s),onChange:c,id:"sort-by",class:"w-full rounded-lg border-slate-200/10 bg-white/5 dark:border-border-dark dark:bg-background-dark text-slate-800 dark:text-white focus:border-primary focus:ring-primary"},[...t[10]||(t[10]=[e("option",{value:"popular"},"인기순",-1),e("option",{value:"latest"},"최신순",-1),e("option",{value:"views"},"조회순",-1)])],544),[[ee,_.value.sortBy]])]),e("div",xe,[e("details",be,[t[12]||(t[12]=e("summary",{class:"flex cursor-pointer items-center justify-between gap-6 py-2"},[e("p",{class:"text-sm font-medium text-slate-800 dark:text-white"},"지역"),e("span",{class:"material-symbols-outlined text-slate-500 dark:text-slate-400 group-open:rotate-180 transition-transform"},"expand_more")],-1)),e("div",me,[(l(),o(u,null,p(S,s=>e("label",{key:s.value,class:"flex items-center gap-2"},[v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>b.value=n),value:s.value,onChange:A,class:"region-filter form-checkbox rounded text-primary focus:ring-primary/50",type:"checkbox"},null,40,fe),[[L,b.value]]),k(" "+a(s.label),1)])),64))])]),e("details",ge,[t[13]||(t[13]=e("summary",{class:"flex cursor-pointer items-center justify-between gap-6 py-2"},[e("p",{class:"text-sm font-medium text-slate-800 dark:text-white"},"여행 타입"),e("span",{class:"material-symbols-outlined text-slate-500 dark:text-slate-400 group-open:rotate-180 transition-transform"},"expand_more")],-1)),e("div",ve,[(l(),o(u,null,p(z,s=>e("label",{key:s,class:"flex items-center gap-2"},[v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>m.value=n),value:s,onChange:A,class:"trip-type-filter form-checkbox rounded text-primary focus:ring-primary/50",type:"checkbox"},null,40,ke),[[L,m.value]]),k(" "+a(s),1)])),64))])]),e("details",ye,[t[14]||(t[14]=e("summary",{class:"flex cursor-pointer items-center justify-between gap-6 py-2"},[e("p",{class:"text-sm font-medium text-slate-800 dark:text-white"},"계절"),e("span",{class:"material-symbols-outlined text-slate-500 dark:text-slate-400 group-open:rotate-180 transition-transform"},"expand_more")],-1)),e("div",he,[(l(),o(u,null,p(U,s=>e("label",{key:s,class:"flex items-center gap-2"},[v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>f.value=n),value:s,onChange:A,class:"season-filter form-checkbox rounded text-primary focus:ring-primary/50",type:"checkbox"},null,40,_e),[[L,f.value]]),k(" "+a(s),1)])),64))])])])])])]),e("div",we,[e("div",Ce,[e("div",Re,[e("button",{onClick:t[5]||(t[5]=s=>E("TRAVEL_PLAN")),class:$(["tab-button px-4 py-2 text-base font-semibold border-b-2 transition-colors",i.value==="TRAVEL_PLAN"?"border-primary text-primary dark:text-primary":"border-transparent text-slate-600 dark:text-slate-400 hover:text-primary dark:hover:text-primary"])}," 국내 여행 공유 ",2),e("button",{onClick:t[6]||(t[6]=s=>E("TRAVEL_RECORD")),class:$(["tab-button px-4 py-2 text-base font-semibold border-b-2 transition-colors",i.value==="TRAVEL_RECORD"?"border-primary text-primary dark:text-primary":"border-transparent text-slate-600 dark:text-slate-400 hover:text-primary dark:hover:text-primary"])}," 여행 기록 ",2)]),e("div",null,[e("h1",Te,a(i.value==="TRAVEL_PLAN"?"국내 여행 계획 공유":"여행 기록"),1),e("p",Ae,a(i.value==="TRAVEL_PLAN"?"다른 사용자들의 여행 계획을 둘러보고 새로운 영감을 얻어보세요.":"다른 사용자들의 여행 기록을 둘러보고 함께 여행의 추억을 나눠보세요."),1)])]),T.value?(l(),o("div",Ve,[(l(),o(u,null,p(6,s=>e("div",{key:s,class:"animate-pulse rounded-xl border border-slate-200/10 dark:border-border-dark bg-white/5 dark:bg-card-dark h-64"})),64))])):h.value.length===0?(l(),o("div",Le,[...t[15]||(t[15]=[e("span",{class:"material-symbols-outlined text-4xl text-slate-400 dark:text-slate-500"},"travel_explore",-1),e("p",{class:"text-sm font-medium text-slate-400 dark:text-slate-500"},[k("여행 계획을 찾을 수 없습니다. "),e("br"),k("필터를 조정해보세요!")],-1)])])):(l(),o("div",Pe,[(l(!0),o(u,null,p(h.value,s=>(l(),o("div",{key:s.postId,class:"group relative flex flex-col overflow-hidden rounded-xl border border-slate-200/10 bg-white/5 dark:border-border-dark dark:bg-card-dark shadow-sm transition-all hover:-translate-y-1 hover:shadow-lg dark:hover:shadow-black/20"},[e("div",{class:"aspect-video w-full bg-cover bg-center cursor-pointer",style:B({backgroundImage:`url('${J()}')`}),onClick:n=>V(s.postId)},null,12,Ie),e("div",Ee,[e("div",je,[e("h3",{class:"text-lg font-bold text-slate-800 dark:text-white cursor-pointer flex-1",onClick:n=>V(s.postId)},a(s.title||"제목 없음"),9,Ne),G(s)?(l(),o("button",{key:0,onClick:w(n=>F(s.postId),["stop"]),class:"flex items-center justify-center rounded-lg p-2 text-red-500 hover:bg-red-500/10 transition-colors",title:"삭제"},[...t[16]||(t[16]=[e("span",{class:"material-symbols-outlined text-sm"},"delete",-1)])],8,$e)):g("",!0)]),e("div",Be,[N(s.regionCode)?(l(),o("span",Me,a(N(s.regionCode)),1)):g("",!0),s.tripType?(l(),o("span",Se,a(s.tripType),1)):g("",!0),s.season?(l(),o("span",ze,a(s.season),1)):g("",!0)]),e("div",Ue,[e("div",De,[s.authorProfileImage?(l(),o("div",{key:0,class:"size-6 rounded-full bg-cover bg-center bg-no-repeat",style:B({backgroundImage:`url('${s.authorProfileImage}')`})},null,4)):(l(),o("div",Fe,[...t[17]||(t[17]=[e("span",{class:"material-symbols-outlined text-xs text-slate-500"},"person",-1)])])),e("span",He,a(s.authorNickname||s.authorName||"작성자"),1)]),e("div",Oe,[e("div",{class:"flex items-center gap-1 cursor-pointer",onClick:w(n=>H(s.postId),["stop"])},[t[18]||(t[18]=e("span",{class:"material-symbols-outlined text-base"},"favorite_border",-1)),e("span",Qe,a(K(s.likeCount||0)),1)],8,qe),e("div",{class:"flex items-center gap-1 cursor-pointer",onClick:w(n=>V(s.postId),["stop"])},[t[19]||(t[19]=e("span",{class:"material-symbols-outlined text-base"},"chat_bubble_outline",-1)),e("span",Je,a(s.commentCount||0),1)],8,Ge)])])])]))),128))]))])])])]),e("div",Ke,[e("button",{onClick:O,class:"flex items-center gap-2 rounded-full bg-primary px-6 py-3 text-white font-bold shadow-lg transition-transform hover:scale-105"},[t[20]||(t[20]=e("span",{class:"material-symbols-outlined"},"share",-1)),e("span",null,a(i.value==="TRAVEL_PLAN"?"내 여행 계획 공유하기":"내 여행 기록 공유하기"),1)])]),x.value?(l(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:t[8]||(t[8]=w(s=>x.value=!1,["self"]))},[e("div",We,[e("div",Xe,[t[22]||(t[22]=e("h3",{class:"text-xl font-bold text-white"},"여행 기록 선택",-1)),e("button",{onClick:t[7]||(t[7]=s=>x.value=!1),class:"text-slate-400 hover:text-white transition-colors"},[...t[21]||(t[21]=[e("span",{class:"material-symbols-outlined"},"close",-1)])])]),t[23]||(t[23]=e("p",{class:"text-slate-400 mb-4"},"게시판에 공유할 여행 기록을 선택해주세요.",-1)),e("div",Ye,[(l(!0),o(u,null,p(I.value,s=>(l(),o("div",{key:s.recordId,onClick:n=>Q(s.recordId),class:"p-4 rounded-lg border border-border-dark hover:bg-card-dark/50 cursor-pointer transition-colors"},[e("h4",et,a(s.title),1),e("p",tt,a(j(s.content)),1)],8,Ze))),128))])])])):g("",!0)]))}},ut=re(st,[["__scopeId","data-v-e296b778"]]);export{ut as default};
