import{u as I,r as c,c as P,j as C,a as r,e as D,b as e,h as i,t as n,n as b,F as N,b6 as M,q as R,v as V,bU as A,k as H,o as l}from"./index-DBgGMAVP.js";import{H as L}from"./Header-gOfElMZz.js";import{b as u}from"./board-BdiKinwz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D-v-8tSO.js";const S={class:"relative flex min-h-screen w-full flex-col"},z={class:"flex-grow"},B={class:"container mx-auto px-4 py-8 max-w-4xl"},T={key:0,class:"text-center py-20"},$={key:1},j={class:"bg-card-dark rounded-xl p-6 mb-6"},F={class:"flex items-start justify-between mb-4"},U={class:"text-3xl font-bold text-text-dark"},q={key:0,class:"flex gap-2"},E={class:"flex items-center gap-4 mb-6 text-text-secondary-dark"},K={class:"flex items-center gap-2"},G=["innerHTML"],J={class:"bg-card-dark rounded-xl p-6"},O={class:"space-y-4"},Q={class:"flex items-start gap-3"},W={class:"flex-1"},X={class:"flex items-center gap-2 mb-1"},Y={class:"font-semibold text-text-dark"},Z={class:"text-sm text-text-secondary-dark"},ee={class:"text-text-dark whitespace-pre-wrap"},te={class:"mt-6"},de={__name:"PostDetailView",setup(se){const m=A(),h=H(),v=I(),p=c(!1),o=c(null),x=c([]),d=c(""),g=c(!1),y=P(()=>v.user&&o.value&&v.user.userId===o.value.userId),f=async()=>{p.value=!0;try{const t=m.params.id,[a,s]=await Promise.all([u.getPost(t),u.getComments(t)]);a.success&&(o.value=a.data),s.success&&(x.value=s.data||[])}catch(t){console.error("게시글 로드 오류:",t)}finally{p.value=!1}},k=async()=>{if(d.value.trim())try{(await u.addComment(m.params.id,{content:d.value})).success&&(d.value="",f())}catch(t){console.error("댓글 작성 오류:",t)}},w=async()=>{if(confirm("정말 이 게시글을 삭제하시겠습니까?"))try{(await u.deletePost(m.params.id)).success&&h.push("/board")}catch(t){console.error("게시글 삭제 오류:",t)}},_=t=>t?new Date(t).toLocaleDateString("ko-KR"):"";return C(()=>{f()}),(t,a)=>(l(),r("div",S,[D(L),e("main",z,[e("div",B,[p.value?(l(),r("div",T,[...a[2]||(a[2]=[e("div",{class:"animate-spin h-10 w-10 text-primary mx-auto mb-4"},null,-1),e("p",{class:"text-text-secondary-dark"},"게시글을 불러오는 중...",-1)])])):o.value?(l(),r("div",$,[e("article",j,[e("div",F,[e("h1",U,n(o.value.title),1),y.value?(l(),r("div",q,[e("button",{onClick:a[0]||(a[0]=s=>g.value=!0),class:"px-4 py-2 bg-primary text-white rounded-lg"},"수정"),e("button",{onClick:w,class:"px-4 py-2 bg-red-500 text-white rounded-lg"},"삭제")])):i("",!0)]),e("div",E,[e("div",K,[o.value.authorProfileImage?(l(),r("div",{key:0,class:"size-8 rounded-full bg-cover bg-center",style:b({backgroundImage:`url('${o.value.authorProfileImage}')`})},null,4)):i("",!0),e("span",null,n(o.value.authorNickname||o.value.authorName||"작성자"),1)]),e("span",null,n(_(o.value.createdAt)),1)]),e("div",{class:"prose prose-invert max-w-none",innerHTML:o.value.content},null,8,G)]),e("div",J,[a[3]||(a[3]=e("h2",{class:"text-2xl font-bold text-text-dark mb-4"},"댓글",-1)),e("div",O,[(l(!0),r(N,null,M(x.value,s=>(l(),r("div",{key:s.commentId,class:"border-b border-border-dark pb-4"},[e("div",Q,[s.authorProfileImage?(l(),r("div",{key:0,class:"size-10 rounded-full bg-cover bg-center",style:b({backgroundImage:`url('${s.authorProfileImage}')`})},null,4)):i("",!0),e("div",W,[e("div",X,[e("span",Y,n(s.authorNickname||s.authorName),1),e("span",Z,n(_(s.createdAt)),1)]),e("p",ee,n(s.content),1)])])]))),128))]),e("div",te,[R(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=s=>d.value=s),class:"w-full bg-background-dark text-text-dark rounded-lg p-4 mb-4",placeholder:"댓글을 입력하세요...",rows:"3"},null,512),[[V,d.value]]),e("button",{onClick:k,class:"px-6 py-2 bg-primary text-white rounded-lg font-bold hover:bg-blue-500"}," 댓글 작성 ")])])])):i("",!0)])])]))}};export{de as default};
