import{u as N,r as v,j as I,k as S,a as m,e as C,b as e,t as x,f as g,q as P,h as V,v as A,n as B,o as f}from"./index-DBgGMAVP.js";import{H as D}from"./Header-gOfElMZz.js";import{a as p}from"./index-D-v-8tSO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const b={async getUser(){return(await p.get("/api/user")).data},async updateNickname(a){return(await p.put("/api/user/nickname",{nickname:a})).data},async updateProfileImage(a){return(await p.put("/api/user/profile-image",{profileImage:a})).data},async getTravelPreferences(){return(await p.get("/api/user/travel-preferences")).data},async updateTravelPreferences(a){return(await p.put("/api/user/travel-preferences",a)).data}},M={class:"relative flex min-h-screen w-full flex-col"},R={class:"flex-grow"},T={class:"container mx-auto px-4 py-8 max-w-4xl"},U={class:"bg-card-dark rounded-xl p-6 mb-6"},z={class:"space-y-4"},E={class:"text-text-dark"},H={class:"text-text-dark"},J={class:"flex items-center gap-2"},L={key:1,class:"text-text-dark"},O={class:"bg-card-dark rounded-xl p-6 mb-6"},$={class:"flex items-center gap-4"},K={__name:"MyPageView",setup(a){var k;const l=S(),s=N(),n=v(!1),o=v(((k=s.user)==null?void 0:k.nickname)||""),y=async()=>{try{if((await b.updateNickname(o.value)).success){n.value=!1;const t={...s.user,nickname:o.value};s.user=t,localStorage.setItem("user",JSON.stringify(t))}}catch(r){console.error("닉네임 업데이트 오류:",r)}},h=()=>{var r;o.value=((r=s.user)==null?void 0:r.nickname)||"",n.value=!1},w=async r=>{const t=r.target.files[0];if(!t)return;const i=new FileReader;i.onload=async d=>{try{if((await b.updateProfileImage(d.target.result)).success){const c={...s.user,profileImage:d.target.result};s.user=c,localStorage.setItem("user",JSON.stringify(c))}}catch(u){console.error("프로필 이미지 업데이트 오류:",u),alert("프로필 이미지 업데이트에 실패했습니다")}},i.readAsDataURL(t)},_=()=>{confirm("로그아웃하시겠습니까?")&&(s.logout(),l.push("/"))};return I(()=>{s.isAuthenticated||l.push("/login")}),(r,t)=>{var i,d,u;return f(),m("div",M,[C(D),e("main",R,[e("div",T,[t[7]||(t[7]=e("h1",{class:"text-3xl font-bold text-text-dark mb-6"},"마이페이지",-1)),e("div",U,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-text-dark mb-4"},"사용자 정보",-1)),e("div",z,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-text-secondary-dark mb-2"},"이메일",-1)),e("p",E,x(((i=g(s).user)==null?void 0:i.email)||""),1)]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-text-secondary-dark mb-2"},"이름",-1)),e("p",H,x(((d=g(s).user)==null?void 0:d.name)||""),1)]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-text-secondary-dark mb-2"},"닉네임",-1)),e("div",J,[n.value?P((f(),m("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=c=>o.value=c),class:"flex-1 bg-background-dark text-text-dark rounded-lg p-2"},null,512)),[[A,o.value]]):(f(),m("p",L,x(o.value||"닉네임이 없습니다"),1)),e("button",{onClick:t[1]||(t[1]=c=>n.value?y():n.value=!0),class:"px-4 py-2 bg-primary text-white rounded-lg"},x(n.value?"저장":"수정"),1),n.value?(f(),m("button",{key:2,onClick:h,class:"px-4 py-2 bg-gray-500 text-white rounded-lg"}," 취소 ")):V("",!0)])])])]),e("div",O,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-text-dark mb-4"},"프로필 이미지",-1)),e("div",$,[e("div",{class:"size-24 rounded-full bg-cover bg-center",style:B({backgroundImage:`url('${((u=g(s).user)==null?void 0:u.profileImage)||""}')`})},null,4),e("input",{type:"file",onChange:w,accept:"image/*",class:"text-text-dark"},null,32)])]),t[8]||(t[8]=e("div",{class:"bg-card-dark rounded-xl p-6"},[e("h2",{class:"text-2xl font-bold text-text-dark mb-4"},"여행 성향"),e("p",{class:"text-text-secondary-dark"},"여행 성향 설정 기능은 추후 구현 예정입니다.")],-1)),e("div",{class:"mt-6"},[e("button",{onClick:_,class:"px-6 py-3 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600"}," 로그아웃 ")])])])])}}};export{K as default};
