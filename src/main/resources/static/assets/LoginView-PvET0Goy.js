import{u as L,r as i,j as S,k as j,a as m,b as t,e as E,w as T,l as B,h as v,d as y,m as w,p as k,q as c,v as u,t as h,s as D,o as x}from"./index-DBgGMAVP.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"relative flex min-h-screen w-full flex-col bg-background-dark"},M={class:"flex h-16 shrink-0 items-center justify-center px-4 md:px-6"},U={class:"flex flex-1 items-center justify-center p-4"},A={class:"flex w-full max-w-md flex-col items-center justify-center gap-6 rounded-xl bg-surface-dark/50 p-6 sm:p-8 border border-border-dark"},F={class:"w-full"},N={class:"flex w-full rounded-lg bg-background-dark p-1"},R={class:"flex flex-col gap-1.5"},Z={class:"flex flex-col gap-1.5"},$=["disabled"],O={class:"truncate"},P={class:"flex flex-col gap-1.5"},z={class:"flex flex-col gap-1.5"},Y={class:"flex flex-col gap-1.5"},J=["disabled"],K={class:"truncate"},Q={__name:"LoginView",setup(W){const f=j(),p=L(),d=i("login"),l=i(!1),n=i({email:"",password:""}),s=i({email:"",password:"",name:""}),C=async()=>{l.value=!0;try{const o=await p.login(n.value.email,n.value.password);o.success?f.push("/dashboard"):alert(o.message||"로그인에 실패했습니다")}catch(o){alert("로그인 중 오류가 발생했습니다: "+(o.message||"알 수 없는 오류"))}finally{l.value=!1}},G=async()=>{l.value=!0;try{const o=await p.register(s.value.email,s.value.password,s.value.name);o.success?f.push("/dashboard"):alert(o.message||"회원가입에 실패했습니다")}catch(o){alert("회원가입 중 오류가 발생했습니다: "+(o.message||"알 수 없는 오류"))}finally{l.value=!1}},g=i(null),I=async()=>{if(!g.value){alert("Google Client ID를 불러오는 중입니다. 잠시 후 다시 시도해주세요.");return}if(typeof window.google>"u"||!window.google.accounts||!window.google.accounts.oauth2){alert("Google 로그인 서비스를 불러오는 중입니다. 잠시 후 다시 시도해주세요.");return}try{window.google.accounts.oauth2.initTokenClient({client_id:g.value,scope:"email profile",callback:async e=>{if(e.error){console.error("Google 로그인 오류:",e.error),alert("Google 로그인에 실패했습니다: "+e.error);return}console.log("Google 토큰 받음, 사용자 정보 가져오는 중...");try{const a=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${e.access_token}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const r=await a.json();console.log("사용자 정보:",r),await _(r)}catch(a){console.error("사용자 정보 가져오기 오류:",a),alert("사용자 정보를 가져오는 중 오류가 발생했습니다: "+a.message)}}}).requestAccessToken({prompt:"consent"})}catch(o){console.error("Google 로그인 초기화 오류:",o),alert("Google 로그인 초기화 중 오류가 발생했습니다: "+o.message)}},_=async o=>{try{l.value=!0;const e=await p.googleLogin({email:o.email,name:o.name,picture:o.picture});e.success?f.push("/dashboard"):alert(e.message||"Google 로그인에 실패했습니다")}catch(e){console.error("Google 로그인 오류:",e),alert("Google 로그인 중 오류가 발생했습니다: "+(e.message||"알 수 없는 오류"))}finally{l.value=!1}},V=(o,e=50)=>{let a=0;const r=setInterval(()=>{a++,typeof window.google<"u"&&window.google.accounts&&window.google.accounts.oauth2?(clearInterval(r),console.log("Google Identity Services 로드 완료"),o()):a>=e&&(clearInterval(r),console.error("Google Identity Services 로드 시간 초과"))},100)},b=async()=>{console.log("Google 로그인 초기화 시작");try{const o=await D.getGoogleClientId();o&&o!=="YOUR_GOOGLE_CLIENT_ID_HERE"?(g.value=o,console.log("Google Client ID 로드 성공:",g.value),V(()=>{console.log("Google 로그인 설정 완료")})):(console.warn("Google Client ID가 설정되지 않았습니다."),alert("Google Client ID가 설정되지 않았습니다. 관리자에게 문의하세요."))}catch(o){console.error("Google Client ID 로드 오류:",o)}};return S(()=>{if(window.google)b();else{const o=document.createElement("script");o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.onload=()=>{window.googleScriptLoaded=!0,b()},document.head.appendChild(o)}p.isAuthenticated&&f.push("/dashboard")}),(o,e)=>{const a=B("RouterLink");return x(),m("div",H,[t("header",M,[E(a,{class:"flex items-center gap-2 text-lg font-bold text-text-primary-dark",to:"/"},{default:T(()=>[...e[7]||(e[7]=[t("span",{class:"material-symbols-outlined text-primary text-3xl"},"explore",-1),t("span",null,"Trip-Board",-1)])]),_:1})]),t("main",U,[t("div",A,[e[15]||(e[15]=t("div",{class:"text-center"},[t("h1",{class:"text-2xl font-bold tracking-tight text-text-primary-dark sm:text-3xl"}," Trip-Board에 오신 것을 환영합니다 "),t("p",{class:"mt-2 text-sm text-text-secondary-dark"},"당신만의 여행을 계획하고 추천받으세요")],-1)),t("div",F,[t("div",N,[t("button",{onClick:e[0]||(e[0]=r=>d.value="login"),class:w(["flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors",d.value==="login"?"bg-primary text-slate-900":"text-text-secondary-dark hover:bg-surface-dark"])}," 로그인 ",2),t("button",{onClick:e[1]||(e[1]=r=>d.value="register"),class:w(["flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors",d.value==="register"?"bg-primary text-slate-900":"text-text-secondary-dark hover:bg-surface-dark"])}," 회원가입 ",2)])]),d.value==="login"?(x(),m("form",{key:0,onSubmit:k(C,["prevent"]),class:"flex w-full flex-col gap-4"},[t("div",R,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-text-secondary-dark",for:"email"},"이메일",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>n.value.email=r),class:"block w-full rounded-lg border-border-dark bg-background-dark text-text-primary-dark placeholder-text-secondary-dark/70 focus:border-primary focus:ring-primary",id:"email",placeholder:"email@example.com",type:"email",required:""},null,512),[[u,n.value.email]])]),t("div",Z,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-text-secondary-dark",for:"password"},"비밀번호",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>n.value.password=r),class:"block w-full rounded-lg border-border-dark bg-background-dark text-text-primary-dark placeholder-text-secondary-dark/70 focus:border-primary focus:ring-primary",id:"password",placeholder:"••••••••",type:"password",required:""},null,512),[[u,n.value.password]])]),e[10]||(e[10]=t("div",{class:"flex items-center justify-end"},[t("a",{class:"text-sm text-primary hover:underline",href:"#"},"비밀번호를 잊으셨나요?")],-1)),t("button",{type:"submit",disabled:l.value,class:"flex h-11 w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-primary px-5 text-base font-bold text-slate-900 transition-colors hover:bg-primary/90 disabled:opacity-50"},[t("span",O,h(l.value?"로그인 중...":"로그인"),1)],8,$)],32)):v("",!0),d.value==="register"?(x(),m("form",{key:1,onSubmit:k(G,["prevent"]),class:"flex w-full flex-col gap-4"},[t("div",P,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-text-secondary-dark",for:"regEmail"},"이메일",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>s.value.email=r),class:"block w-full rounded-lg border-border-dark bg-background-dark text-text-primary-dark placeholder-text-secondary-dark/70 focus:border-primary focus:ring-primary",id:"regEmail",placeholder:"email@example.com",type:"email",required:""},null,512),[[u,s.value.email]])]),t("div",z,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-text-secondary-dark",for:"regPassword"},"비밀번호",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s.value.password=r),class:"block w-full rounded-lg border-border-dark bg-background-dark text-text-primary-dark placeholder-text-secondary-dark/70 focus:border-primary focus:ring-primary",id:"regPassword",placeholder:"최소 8자 이상",type:"password",required:"",minlength:"8"},null,512),[[u,s.value.password]])]),t("div",Y,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-text-secondary-dark",for:"name"},"이름",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>s.value.name=r),class:"block w-full rounded-lg border-border-dark bg-background-dark text-text-primary-dark placeholder-text-secondary-dark/70 focus:border-primary focus:ring-primary",id:"name",placeholder:"이름을 입력하세요",type:"text",required:""},null,512),[[u,s.value.name]])]),t("button",{type:"submit",disabled:l.value,class:"flex h-11 w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-primary px-5 text-base font-bold text-slate-900 transition-colors hover:bg-primary/90 disabled:opacity-50"},[t("span",K,h(l.value?"회원가입 중...":"회원가입"),1)],8,J)],32)):v("",!0),e[16]||(e[16]=y('<div class="relative w-full" data-v-dff3b2ea><div class="absolute inset-0 flex items-center" data-v-dff3b2ea><div class="w-full border-t border-border-dark" data-v-dff3b2ea></div></div><div class="relative flex justify-center text-sm" data-v-dff3b2ea><span class="bg-surface-dark/50 px-2 text-text-secondary-dark" data-v-dff3b2ea>소셜 계정으로 간편하게 시작하기</span></div></div>',1)),t("div",{class:"flex w-full flex-col"},[t("div",{id:"google-signin-button",onClick:I,class:"flex w-full cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg border border-border-dark bg-surface-dark px-4 py-2.5 text-sm font-medium text-text-primary-dark transition-colors hover:bg-border-dark"},[...e[14]||(e[14]=[y('<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-dff3b2ea><path d="M22.5777 12.2618C22.5777 11.4545 22.5055 10.6691 22.3801 9.90909H12.2182V14.2255H18.1091C17.8546 15.6582 17.0328 16.8982 15.8201 17.7055V20.3345H19.5237C21.46 18.52 22.5777 15.6582 22.5777 12.2618Z" fill="#4285F4" data-v-dff3b2ea></path><path d="M12.2182 23.0001C15.2328 23.0001 17.7473 22.0219 19.5237 20.3346L15.82 17.7055C14.8019 18.4346 13.6001 18.8419 12.2182 18.8419C9.58185 18.8419 7.33458 17.0564 6.55458 14.651H2.73822V17.3728C4.46185 20.7819 8.01458 23.0001 12.2182 23.0001Z" fill="#34A853" data-v-dff3b2ea></path><path d="M6.55451 14.6509C6.32724 13.9436 6.19633 13.1909 6.19633 12.4145C6.19633 11.6382 6.32724 10.8854 6.54542 10.1782V7.45636H2.73815C1.99633 8.98182 1.5 10.6582 1.5 12.4145C1.5 14.1709 1.99633 15.8473 2.73815 17.3727L6.55451 14.6509Z" fill="#FBBC05" data-v-dff3b2ea></path><path d="M12.2182 5.98727C13.7837 5.98727 15.0673 6.54545 15.5891 7.03818L19.5946 3.23999C17.7382 1.54363 15.2237 0.827273 12.2182 0.827273C8.01458 0.827273 4.46185 3.04545 2.73822 6.45454L6.54549 9.17636C7.33458 6.77091 9.58185 5.98727 12.2182 5.98727Z" fill="#EA4335" data-v-dff3b2ea></path></svg><span class="truncate" data-v-dff3b2ea>Google 계정으로 로그인</span>',2)])])]),e[17]||(e[17]=t("footer",{class:"mt-4 text-center text-xs text-text-secondary-dark"},[t("p",null,[t("a",{class:"underline hover:text-primary",href:"#"},"이용약관"),t("span",null," 및 "),t("a",{class:"underline hover:text-primary",href:"#"},"개인정보처리방침"),t("span",null,"에 동의합니다.")])],-1))])])])}}},te=q(Q,[["__scopeId","data-v-dff3b2ea"]]);export{te as default};
